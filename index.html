<!-- index.html -->
<html>
<head>
  <!-- manifest.jsonを呼び出しています -->
	<link rel="manifest" href="./manifest.json">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-title" content="cly7796.net PWA sample">
	<link rel="apple-touch-icon" href="./icon-192.png">

  <title>Hello PWA.</title>
  <style>
    body {
      text-align:center;
      font-size: 40px;
      vertical-align: middle;
    }
    .image {
      width: 80%;
      margin: auto;
      display: block;
    }
  </style>
</head>
<body>
  <h1>Hello PWA.</h1>
  <img src="./pwa-logo.svg" alt="PWA logo" class="image" />
  <a href="https://www.yahoo.co.jp/">p.html</a>

  <button id="save_button">Add to home screen</button>


  <script>
    // service workerが有効なら、service-worker.js を登録します
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js').then(function() { console.log('Service Worker Registered'); });
   }
  </script>

<!-- <script>

	document.addEventListener("DOMContentLoaded", function(){
		var saveButton = document.getElementById('save_button');
		var deferredPrompt;

		console.log(deferredPrompt);

		window.addEventListener('beforeinstallprompt', function(e) {
		console.log('インストールバナーの表示をキャンセルします');
		e.preventDefault();
		// saveButton.removeAttribute('disabled');
		deferredPrompt = e;
		showAddToHomeScreen();
		});

		function showAddToHomeScreen() {

		  saveButton.style.display = "block";
		  saveButton.addEventListener("click", addToHomeScreen);

		}

		function addToHomeScreen() {

		  // hide our user interface that shows our A2HS button
		  saveButton.style.display = 'none';

		  // Show the prompt
		  deferredPrompt.prompt();

		  // Wait for the user to respond to the prompt
		  deferredPrompt.userChoice
		    .then(function(choiceResult){

		  if (choiceResult.outcome === 'accepted') {
		    console.log('User accepted the A2HS prompt');
		  } else {
		    console.log('User dismissed the A2HS prompt');
		  }

		  deferredPrompt = null;

		});
		}
	}, false);
</script> -->
</body>
</html>